{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://converge.local/schemas/notificationlog.schema.json",
  "title": "NotificationLog",
  "description": "Log entries for automated notifications (email, SMS, push).",
  "type": "object",
  "$comment": "Aligned with main.models.NotificationLog; closed schema.",
  "properties": {
    "id": { "type": "integer", "readOnly": true },
    "content_type": { "type": ["integer", "null"], "minimum": 1 },
    "object_id": { "type": ["integer", "null"], "minimum": 1 },
    "recipient": { "type": "string" },
    "channel": { "type": "string", "enum": ["email", "sms", "push"] },
    "subject": { "type": "string" },
    "message": { "type": "string" },
    "status": { "type": "string", "enum": ["pending", "sent", "failed", "delivered", "bounced"] },
    "sent_at": { "type": ["string", "null"], "format": "date-time", "readOnly": true },
    "delivered_at": { "type": ["string", "null"], "format": "date-time", "readOnly": true },
    "error_message": { "type": "string" },
    "external_id": { "type": "string" },
    "created_at": { "type": "string", "format": "date-time", "readOnly": true }
  },
  "required": ["recipient", "channel", "message"],
  "additionalProperties": false,
  "examples": [
    {
      "recipient": "customer@example.com",
      "channel": "email",
      "subject": "Appointment Reminder",
      "message": "Your technician arrives at 9:00 AM.",
      "status": "sent"
    }
  ]
}
