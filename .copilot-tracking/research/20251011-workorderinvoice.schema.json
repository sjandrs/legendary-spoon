{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://converge.local/schemas/workorderinvoice.schema.json",
  "title": "WorkOrderInvoice",
  "description": "Invoice generated from a WorkOrder.",
  "type": "object",
  "$comment": "Aligned with WorkOrderInvoiceSerializer; closed schema with readOnly/writeOnly annotations.",
  "properties": {
    "id": { "type": "integer", "readOnly": true },
    "work_order": { "type": "integer" },
    "work_order_description": { "type": "string", "readOnly": true },
    "issued_date": { "type": "string", "format": "date" },
    "due_date": { "type": "string", "format": "date" },
    "payment_terms": { "type": "string", "enum": ["net_15", "net_30", "net_60", "due_on_receipt"] },
    "total_amount": { "type": "number", "minimum": 0, "readOnly": true },
    "is_paid": { "type": "boolean" },
    "paid_date": { "type": "string", "format": "date" },
    "is_overdue": { "type": "boolean", "readOnly": true },
    "days_overdue": { "type": "integer", "minimum": 0, "readOnly": true },
    "created_at": { "type": "string", "format": "date-time", "readOnly": true }
  },
  "required": ["work_order", "issued_date", "due_date", "payment_terms"],
  "additionalProperties": false,
  "examples": [
    {
      "work_order": 42,
      "issued_date": "2025-10-11",
      "due_date": "2025-11-10",
      "payment_terms": "net_30",
      "is_paid": false
    }
  ]
}
