{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://converge.local/schemas/monthlydistribution.schema.json",
  "title": "MonthlyDistribution",
  "description": "Twelve-month percentage allocation summing to 100% for a fiscal year.",
  "type": "object",
  "$comment": "Sum==100% and uniqueness of months are enforced server-side.",
  "properties": {
    "id": { "type": "integer", "readOnly": true },
    "distribution_id": { "type": "string", "minLength": 1 },
    "fiscal_year": { "type": ["string", "integer"] },
    "percentages": {
      "type": "array",
      "minItems": 12,
      "maxItems": 12,
      "items": {
        "type": "object",
        "properties": {
          "month": {
            "type": "string",
            "enum": [
              "January","February","March","April","May","June",
              "July","August","September","October","November","December"
            ]
          },
          "percentage_allocation": { "type": "number", "minimum": 0, "maximum": 100 }
        },
        "required": ["month", "percentage_allocation"],
        "additionalProperties": false
      }
    },
    "created_at": { "type": "string", "format": "date-time", "readOnly": true }
  },
  "required": ["distribution_id", "fiscal_year", "percentages"],
  "additionalProperties": false,
  "examples": [
    {
      "distribution_id": "_Test Distribution",
      "fiscal_year": 2026,
      "percentages": [
        {"month":"January","percentage_allocation":8},
        {"month":"February","percentage_allocation":8},
        {"month":"March","percentage_allocation":8},
        {"month":"April","percentage_allocation":8},
        {"month":"May","percentage_allocation":8},
        {"month":"June","percentage_allocation":8},
        {"month":"July","percentage_allocation":8},
        {"month":"August","percentage_allocation":8},
        {"month":"September","percentage_allocation":8},
        {"month":"October","percentage_allocation":8},
        {"month":"November","percentage_allocation":10},
        {"month":"December","percentage_allocation":10}
      ]
    }
  ]
}
